<h2>html_helper.py</h2>
<div>@@ -9,13 +9,13 @@</div>
<table border="0" style="white-space: pre-wrap; border-collapse: collapse; font-family: Courier New, Courier, monospace;" width="100%">
<tbody>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">9</td><td style="background-color: inherit; vertical-align: top; width:47% ">     of the html syntax.</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">9</td><td style="background-color: inherit; vertical-align: top; width:47% ">     of the html syntax.</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">10</td><td style="background-color: inherit; vertical-align: top; width:47% ">     """</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">10</td><td style="background-color: inherit; vertical-align: top; width:47% ">     """</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">11</td><td style="background-color: inherit; vertical-align: top; width:47% ">     ret = []</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">11</td><td style="background-color: inherit; vertical-align: top; width:47% ">     ret = []</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">12</td><td style="background-color: pink; vertical-align: top; width:47%">-    for c in text:</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">12</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+    for char in text:</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">13</td><td style="background-color: pink; vertical-align: top; width:47%">-        if c == "&lt;":</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">13</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        if char == "&lt;":</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">14</td><td style="background-color: inherit; vertical-align: top; width:47% ">             ret.append("&lt;")</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">14</td><td style="background-color: inherit; vertical-align: top; width:47% ">             ret.append("&lt;")</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">15</td><td style="background-color: pink; vertical-align: top; width:47%">-        elif c == "&gt;":</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">15</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        elif char == "&gt;":</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">16</td><td style="background-color: inherit; vertical-align: top; width:47% ">             ret.append("&gt;")</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">16</td><td style="background-color: inherit; vertical-align: top; width:47% ">             ret.append("&gt;")</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">17</td><td style="background-color: inherit; vertical-align: top; width:47% ">         else:</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">17</td><td style="background-color: inherit; vertical-align: top; width:47% ">         else:</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">18</td><td style="background-color: pink; vertical-align: top; width:47%">-            ret.append(c)</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">18</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+            ret.append(char)</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">19</td><td style="background-color: inherit; vertical-align: top; width:47% ">     return "".join(ret)</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">19</td><td style="background-color: inherit; vertical-align: top; width:47% ">     return "".join(ret)</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">20</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">20</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">21</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">21</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td>
</tr>
<tr>
<td>  </td><td>  </td><td>  </td><td>  </td>
</tr>
</tbody>
</table>

<h2>tests/multiline-diff-external-css-expect.html</h2>
<div>@@ -0,0 +1,20 @@</div>
<table border="0" style="white-space: pre-wrap; border-collapse: collapse; font-family: Courier New, Courier, monospace;" width="100%">
<tbody>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">1</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;div&gt;@@ -1,3 +1,4 @@&lt;/div&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">2</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;table class="ud_table"&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">3</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;tbody&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">4</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;tr&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">5</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;td class="ud_lineno"&gt;1&lt;/td&gt;&lt;td class="ud_neutral"&gt; python&lt;/td&gt;&lt;td class="ud_lineno"&gt;1&lt;/td&gt;&lt;td class="ud_neutral"&gt; python&lt;/td&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">6</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;/tr&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">7</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;tr&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">8</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;td class="ud_lineno"&gt;2&lt;/td&gt;&lt;td class="ud_minus"&gt;-ham&lt;/td&gt;&lt;td class="ud_lineno"&gt;2&lt;/td&gt;&lt;td class="ud_plus"&gt;+hamster&lt;/td&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">9</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;/tr&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">10</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;tr&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">11</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td class="ud_lineno"&gt;3&lt;/td&gt;&lt;td class="ud_plus"&gt;+kola&lt;/td&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">12</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;/tr&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">13</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;tr&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">14</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;td class="ud_lineno"&gt;3&lt;/td&gt;&lt;td class="ud_neutral"&gt; guido&lt;/td&gt;&lt;td class="ud_lineno"&gt;4&lt;/td&gt;&lt;td class="ud_neutral"&gt; guido&lt;/td&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">15</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;/tr&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">16</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;tr&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">17</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">18</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;/tr&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">19</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;/tbody&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">20</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;/table&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td>  </td><td>  </td>
</tr>
<tr>
<td>  </td><td style="background-color: inherit; vertical-align: top; width:47% "></td><td>  </td><td style="background-color: inherit; vertical-align: top; width:47% "></td>
</tr>
</tbody>
</table>

<h2>tests/oneline-diff-expect.html</h2>
<div>@@ -26,4 +26,4 @@</div>
<table border="0" style="white-space: pre-wrap; border-collapse: collapse; font-family: Courier New, Courier, monospace;" width="100%">
<tbody>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">26</td><td style="background-color: inherit; vertical-align: top; width:47% "> &lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">26</td><td style="background-color: inherit; vertical-align: top; width:47% "> &lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">27</td><td style="background-color: inherit; vertical-align: top; width:47% "> &lt;/tr&gt;</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">27</td><td style="background-color: inherit; vertical-align: top; width:47% "> &lt;/tr&gt;</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">28</td><td style="background-color: inherit; vertical-align: top; width:47% "> &lt;/tbody&gt;</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">28</td><td style="background-color: inherit; vertical-align: top; width:47% "> &lt;/tbody&gt;</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">29</td><td style="background-color: pink; vertical-align: top; width:47%">-&lt;/table&gt;</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">29</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;/table&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td>  </td><td>  </td>
</tr>
</tbody>
</table>

<h2>tests/oneline-diff-external-css-expect.html</h2>
<div>@@ -0,0 +1,29 @@</div>
<table border="0" style="white-space: pre-wrap; border-collapse: collapse; font-family: Courier New, Courier, monospace;" width="100%">
<tbody>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">1</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;div&gt;@@ -30,7 +30,7 @@&lt;/div&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">2</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;table class="ud_table"&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">3</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;tbody&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">4</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;tr&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">5</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;td class="ud_lineno"&gt;30&lt;/td&gt;&lt;td class="ud_neutral"&gt; }&lt;/td&gt;&lt;td class="ud_lineno"&gt;30&lt;/td&gt;&lt;td class="ud_neutral"&gt; }&lt;/td&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">6</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;/tr&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">7</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;tr&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">8</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;td class="ud_lineno"&gt;31&lt;/td&gt;&lt;td class="ud_neutral"&gt; &lt;/td&gt;&lt;td class="ud_lineno"&gt;31&lt;/td&gt;&lt;td class="ud_neutral"&gt; &lt;/td&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">9</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;/tr&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">10</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;tr&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">11</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;td class="ud_lineno"&gt;32&lt;/td&gt;&lt;td class="ud_neutral"&gt; void BindingEnv::AddRule(const Rule* rule) {&lt;/td&gt;&lt;td class="ud_lineno"&gt;32&lt;/td&gt;&lt;td class="ud_neutral"&gt; void BindingEnv::AddRule(const Rule* rule) {&lt;/td&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">12</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;/tr&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">13</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;tr&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">14</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;td class="ud_lineno"&gt;33&lt;/td&gt;&lt;td class="ud_minus"&gt;-  assert(LookupRule(rule-&gt;name()) == NULL);&lt;/td&gt;&lt;td class="ud_lineno"&gt;33&lt;/td&gt;&lt;td class="ud_plus"&gt;+  assert(LookupRuleCurrentScope(rule-&gt;name()) == NULL);&lt;/td&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">15</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;/tr&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">16</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;tr&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">17</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;td class="ud_lineno"&gt;34&lt;/td&gt;&lt;td class="ud_neutral"&gt;   rules_[rule-&gt;name()] = rule;&lt;/td&gt;&lt;td class="ud_lineno"&gt;34&lt;/td&gt;&lt;td class="ud_neutral"&gt;   rules_[rule-&gt;name()] = rule;&lt;/td&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">18</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;/tr&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">19</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;tr&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">20</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;td class="ud_lineno"&gt;35&lt;/td&gt;&lt;td class="ud_neutral"&gt; }&lt;/td&gt;&lt;td class="ud_lineno"&gt;35&lt;/td&gt;&lt;td class="ud_neutral"&gt; }&lt;/td&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">21</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;/tr&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">22</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;tr&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">23</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;td class="ud_lineno"&gt;36&lt;/td&gt;&lt;td class="ud_neutral"&gt; &lt;/td&gt;&lt;td class="ud_lineno"&gt;36&lt;/td&gt;&lt;td class="ud_neutral"&gt; &lt;/td&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">24</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;/tr&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">25</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;tr&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">26</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">27</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;/tr&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">28</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;/tbody&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">29</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+&lt;/table&gt;</td>
</tr>
<tr>
<td>  </td><td>  </td><td>  </td><td>  </td>
</tr>
<tr>
<td>  </td><td style="background-color: inherit; vertical-align: top; width:47% "></td><td>  </td><td style="background-color: inherit; vertical-align: top; width:47% "></td>
</tr>
</tbody>
</table>

<h2>unified_diff.py</h2>
<div>@@ -6,7 +6,6 @@</div>
<table border="0" style="white-space: pre-wrap; border-collapse: collapse; font-family: Courier New, Courier, monospace;" width="100%">
<tbody>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">6</td><td style="background-color: inherit; vertical-align: top; width:47% "> import html_helper</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">6</td><td style="background-color: inherit; vertical-align: top; width:47% "> import html_helper</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">7</td><td style="background-color: inherit; vertical-align: top; width:47% "> import re</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">7</td><td style="background-color: inherit; vertical-align: top; width:47% "> import re</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">8</td><td style="background-color: inherit; vertical-align: top; width:47% "> import sys</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">8</td><td style="background-color: inherit; vertical-align: top; width:47% "> import sys</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">9</td><td style="background-color: pink; vertical-align: top; width:47%">-import pdb</td><td>  </td><td>  </td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">10</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">9</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">11</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">10</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">12</td><td style="background-color: inherit; vertical-align: top; width:47% "> class UnifiedDiffTrunk(object):</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">11</td><td style="background-color: inherit; vertical-align: top; width:47% "> class UnifiedDiffTrunk(object):</td>
</tr>
<tr>
<td>  </td><td>  </td><td>  </td><td>  </td>
</tr>
</tbody>
</table>

<div>@@ -22,7 +21,10 @@</div>
<table border="0" style="white-space: pre-wrap; border-collapse: collapse; font-family: Courier New, Courier, monospace;" width="100%">
<tbody>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">22</td><td style="background-color: inherit; vertical-align: top; width:47% ">             sys.exit(1)</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">21</td><td style="background-color: inherit; vertical-align: top; width:47% ">             sys.exit(1)</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">23</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">22</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">24</td><td style="background-color: inherit; vertical-align: top; width:47% ">     def line_info(self):</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">23</td><td style="background-color: inherit; vertical-align: top; width:47% ">     def line_info(self):</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">25</td><td style="background-color: pink; vertical-align: top; width:47%">-        line_pos = r"[" + re.escape("+-") + r"]\d+"</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">24</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        """</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">25</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        Return: the line info with heading and trailing @@</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">26</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        @@ from-file-line-numbers to-file-line-numbers @@</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">27</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        """</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">26</td><td style="background-color: inherit; vertical-align: top; width:47% ">         reg = re.compile(r"(?P&lt;chunk_header&gt;@@ .* @@)")</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">28</td><td style="background-color: inherit; vertical-align: top; width:47% ">         reg = re.compile(r"(?P&lt;chunk_header&gt;@@ .* @@)")</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">27</td><td style="background-color: inherit; vertical-align: top; width:47% ">         for line in self.trunk:</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">29</td><td style="background-color: inherit; vertical-align: top; width:47% ">         for line in self.trunk:</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">28</td><td style="background-color: inherit; vertical-align: top; width:47% ">             match = reg.match(line)</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">30</td><td style="background-color: inherit; vertical-align: top; width:47% ">             match = reg.match(line)</td>
</tr>
<tr>
<td>  </td><td>  </td><td>  </td><td>  </td>
</tr>
</tbody>
</table>

<div>@@ -59,9 +61,25 @@</div>
<table border="0" style="white-space: pre-wrap; border-collapse: collapse; font-family: Courier New, Courier, monospace;" width="100%">
<tbody>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">59</td><td style="background-color: inherit; vertical-align: top; width:47% ">             return self._format_to_html_inline_css()</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">61</td><td style="background-color: inherit; vertical-align: top; width:47% ">             return self._format_to_html_inline_css()</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">60</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">62</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">61</td><td style="background-color: inherit; vertical-align: top; width:47% ">     def _format_to_html_external_css(self):</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">63</td><td style="background-color: inherit; vertical-align: top; width:47% ">     def _format_to_html_external_css(self):</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">62</td><td style="background-color: pink; vertical-align: top; width:47%">-        """Produce html with external css style."""</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">64</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        """Produce html with external css style, two-side layout.</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">63</td><td style="background-color: pink; vertical-align: top; width:47%">-        ret = []</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">65</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">64</td><td style="background-color: pink; vertical-align: top; width:47%">-        return "".join(ret)</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">66</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        Note: Users need to supply his/her css file, where the following</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">67</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+              class are defined:</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">68</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">69</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+              ud_table: Table style.</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">70</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+              ud_lineno: Line number style.</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">71</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+              ud_neutral: The style for unchanged lines.</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">72</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+              ud_minus: The style for deleted lines in the old revision.</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">73</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+              ud_plus: The style for added lines in the new revision.</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">74</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        """</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">75</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        table_attrs = {"class": "ud_table"}</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">76</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        lineno_attrs = {"class": "ud_lineno"}</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">77</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        plus_attrs = {"class": "ud_plus"}</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">78</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        minus_attrs = {"class": "ud_minus"}</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">79</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        neutral_attrs = {"class": "ud_neutral"}</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">80</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        return self._format_to_html_general(table_attrs, lineno_attrs,</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">81</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+                                            neutral_attrs, minus_attrs,</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">82</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+                                            plus_attrs)</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">65</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">83</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">66</td><td style="background-color: inherit; vertical-align: top; width:47% ">     def _format_to_html_inline_css(self):</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">84</td><td style="background-color: inherit; vertical-align: top; width:47% ">     def _format_to_html_inline_css(self):</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">67</td><td style="background-color: inherit; vertical-align: top; width:47% ">         """Produce html with inline css style, two-side layout.</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">85</td><td style="background-color: inherit; vertical-align: top; width:47% ">         """Produce html with inline css style, two-side layout.</td>
</tr>
<tr>
<td>  </td><td>  </td><td>  </td><td>  </td>
</tr>
</tbody>
</table>

<div>@@ -75,32 +93,42 @@</div>
<table border="0" style="white-space: pre-wrap; border-collapse: collapse; font-family: Courier New, Courier, monospace;" width="100%">
<tbody>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">75</td><td style="background-color: inherit; vertical-align: top; width:47% ">             "style": ("white-space: pre-wrap; "</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">93</td><td style="background-color: inherit; vertical-align: top; width:47% ">             "style": ("white-space: pre-wrap; "</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">76</td><td style="background-color: inherit; vertical-align: top; width:47% ">                       "font-family: Courier New, Courier, monospace; ")</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">94</td><td style="background-color: inherit; vertical-align: top; width:47% ">                       "font-family: Courier New, Courier, monospace; ")</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">77</td><td style="background-color: inherit; vertical-align: top; width:47% ">             }</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">95</td><td style="background-color: inherit; vertical-align: top; width:47% ">             }</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">78</td><td style="background-color: pink; vertical-align: top; width:47%">-        td_attrs_plus = {"style": "background-color: yellowgreen; width: 45%"</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">96</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        lineno_attrs = {"style": ("background-color: lightgray; "</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">79</td><td style="background-color: pink; vertical-align: top; width:47%">-        }</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">97</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+                                  "text-align: right;")}</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">80</td><td style="background-color: pink; vertical-align: top; width:47%">-        td_attrs_minus = {"style": "background-color: pink; width: 45%"</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">98</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        neutral_attrs = {"style": ("background-color: inherit; "</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">81</td><td style="background-color: pink; vertical-align: top; width:47%">-        }</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">99</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+                                   "width: 45%")}</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">82</td><td style="background-color: pink; vertical-align: top; width:47%">-        td_attrs_neutral = {"style": "background-color: inherit; width: 45%"</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">100</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        minus_attrs = {"style": "background-color: pink; width: 45%"}</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">83</td><td style="background-color: pink; vertical-align: top; width:47%">-        }</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">101</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        plus_attrs = {"style": ("background-color: yellowgreen; "</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">84</td><td style="background-color: pink; vertical-align: top; width:47%">-</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">102</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+                                "width: 45%")}</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">103</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">104</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        return self._format_to_html_general(table_attrs, lineno_attrs,</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">105</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+                                            neutral_attrs, minus_attrs,</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">106</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+                                            plus_attrs)</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">107</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">108</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">109</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+    def _format_to_html_general(self, table_attrs, lineno_attrs,</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">110</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+                                neutral_attrs, minus_attrs, plus_attrs):</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">111</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        """General method to produce diff table. The css styles are given by</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">112</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        callers.</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">113</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        """</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">85</td><td style="background-color: inherit; vertical-align: top; width:47% ">         lineno_old, len_old, lineno_new, len_new = self.diff_at()</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">114</td><td style="background-color: inherit; vertical-align: top; width:47% ">         lineno_old, len_old, lineno_new, len_new = self.diff_at()</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">86</td><td style="background-color: inherit; vertical-align: top; width:47% ">         lineno_old = abs(lineno_old)</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">115</td><td style="background-color: inherit; vertical-align: top; width:47% ">         lineno_old = abs(lineno_old)</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">87</td><td style="background-color: inherit; vertical-align: top; width:47% ">         lineno_new = abs(lineno_new)</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">116</td><td style="background-color: inherit; vertical-align: top; width:47% ">         lineno_new = abs(lineno_new)</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">88</td><td style="background-color: pink; vertical-align: top; width:47%">-        empty_row = ["&lt;td&gt;&lt;/td&gt;" for i in range(4)]</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">117</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        rows = [["&lt;td&gt;&lt;/td&gt;" for _ in range(4)]</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">89</td><td style="background-color: pink; vertical-align: top; width:47%">-        rows = [["&lt;td&gt;&lt;/td&gt;" for i in range(4)]</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">118</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+                for _ in range(max(len_old, len_new)+1)]</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">90</td><td style="background-color: pink; vertical-align: top; width:47%">-                for j in range(max(len_old, len_new)+1)]</td><td>  </td><td>  </td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">91</td><td style="background-color: inherit; vertical-align: top; width:47% ">         row_old = 0</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">119</td><td style="background-color: inherit; vertical-align: top; width:47% ">         row_old = 0</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">92</td><td style="background-color: inherit; vertical-align: top; width:47% ">         row_new = 0</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">120</td><td style="background-color: inherit; vertical-align: top; width:47% ">         row_new = 0</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">93</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">121</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">94</td><td style="background-color: inherit; vertical-align: top; width:47% ">         for line in self.trunk:</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">122</td><td style="background-color: inherit; vertical-align: top; width:47% ">         for line in self.trunk:</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">95</td><td style="background-color: inherit; vertical-align: top; width:47% ">             tline = html_helper.replace_lt_gt(line)</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">123</td><td style="background-color: inherit; vertical-align: top; width:47% ">             tline = html_helper.replace_lt_gt(line)</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">124</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+            lblock_old = html_helper.td_block(str(lineno_old), lineno_attrs)</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">125</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+            lblock_new = html_helper.td_block(str(lineno_new), lineno_attrs)</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">96</td><td style="background-color: inherit; vertical-align: top; width:47% ">             if len(line) &lt;= 0:</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">126</td><td style="background-color: inherit; vertical-align: top; width:47% ">             if len(line) &lt;= 0:</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">97</td><td style="background-color: inherit; vertical-align: top; width:47% ">                 pass</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">127</td><td style="background-color: inherit; vertical-align: top; width:47% ">                 pass</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">98</td><td style="background-color: inherit; vertical-align: top; width:47% ">             elif line[0] == " ":</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">128</td><td style="background-color: inherit; vertical-align: top; width:47% ">             elif line[0] == " ":</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">99</td><td style="background-color: inherit; vertical-align: top; width:47% ">                 row_old = max(row_old, row_new)</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">129</td><td style="background-color: inherit; vertical-align: top; width:47% ">                 row_old = max(row_old, row_new)</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">100</td><td style="background-color: inherit; vertical-align: top; width:47% ">                 row_new = row_old</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">130</td><td style="background-color: inherit; vertical-align: top; width:47% ">                 row_new = row_old</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">101</td><td style="background-color: pink; vertical-align: top; width:47%">-                tblock = html_helper.td_block([tline], td_attrs_neutral)</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">131</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+                tblock = html_helper.td_block([tline], neutral_attrs)</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">102</td><td style="background-color: pink; vertical-align: top; width:47%">-                lblock_old = self._td_block_lineno(lineno_old)</td><td>  </td><td>  </td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">103</td><td style="background-color: pink; vertical-align: top; width:47%">-                lblock_new = self._td_block_lineno(lineno_new)</td><td>  </td><td>  </td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">104</td><td style="background-color: inherit; vertical-align: top; width:47% ">                 rows[row_old][0] = lblock_old</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">132</td><td style="background-color: inherit; vertical-align: top; width:47% ">                 rows[row_old][0] = lblock_old</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">105</td><td style="background-color: inherit; vertical-align: top; width:47% ">                 rows[row_old][1] = tblock</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">133</td><td style="background-color: inherit; vertical-align: top; width:47% ">                 rows[row_old][1] = tblock</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">106</td><td style="background-color: inherit; vertical-align: top; width:47% ">                 rows[row_new][2] = lblock_new</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">134</td><td style="background-color: inherit; vertical-align: top; width:47% ">                 rows[row_new][2] = lblock_new</td>
</tr>
</tbody>
</table>

<div>@@ -110,15 +138,13 @@</div>
<table border="0" style="white-space: pre-wrap; border-collapse: collapse; font-family: Courier New, Courier, monospace;" width="100%">
<tbody>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">110</td><td style="background-color: inherit; vertical-align: top; width:47% ">                 row_old += 1</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">138</td><td style="background-color: inherit; vertical-align: top; width:47% ">                 row_old += 1</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">111</td><td style="background-color: inherit; vertical-align: top; width:47% ">                 row_new += 1</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">139</td><td style="background-color: inherit; vertical-align: top; width:47% ">                 row_new += 1</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">112</td><td style="background-color: inherit; vertical-align: top; width:47% ">             elif line[0] == "-":</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">140</td><td style="background-color: inherit; vertical-align: top; width:47% ">             elif line[0] == "-":</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">113</td><td style="background-color: pink; vertical-align: top; width:47%">-                lblock_old = self._td_block_lineno(lineno_old)</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">141</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+                tblock = html_helper.td_block([tline], minus_attrs)</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">114</td><td style="background-color: pink; vertical-align: top; width:47%">-                tblock = html_helper.td_block([tline], td_attrs_minus)</td><td>  </td><td>  </td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">115</td><td style="background-color: inherit; vertical-align: top; width:47% ">                 rows[row_old][0] = lblock_old</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">142</td><td style="background-color: inherit; vertical-align: top; width:47% ">                 rows[row_old][0] = lblock_old</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">116</td><td style="background-color: inherit; vertical-align: top; width:47% ">                 rows[row_old][1] = tblock</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">143</td><td style="background-color: inherit; vertical-align: top; width:47% ">                 rows[row_old][1] = tblock</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">117</td><td style="background-color: inherit; vertical-align: top; width:47% ">                 lineno_old += 1</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">144</td><td style="background-color: inherit; vertical-align: top; width:47% ">                 lineno_old += 1</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">118</td><td style="background-color: inherit; vertical-align: top; width:47% ">                 row_old += 1</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">145</td><td style="background-color: inherit; vertical-align: top; width:47% ">                 row_old += 1</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">119</td><td style="background-color: inherit; vertical-align: top; width:47% ">             elif line[0] == "+":</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">146</td><td style="background-color: inherit; vertical-align: top; width:47% ">             elif line[0] == "+":</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">120</td><td style="background-color: pink; vertical-align: top; width:47%">-                lblock_new = self._td_block_lineno(lineno_new)</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">147</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+                tblock = html_helper.td_block([tline], plus_attrs)</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">121</td><td style="background-color: pink; vertical-align: top; width:47%">-                tblock = html_helper.td_block([tline], td_attrs_plus)</td><td>  </td><td>  </td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">122</td><td style="background-color: inherit; vertical-align: top; width:47% ">                 rows[row_new][2] = lblock_new</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">148</td><td style="background-color: inherit; vertical-align: top; width:47% ">                 rows[row_new][2] = lblock_new</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">123</td><td style="background-color: inherit; vertical-align: top; width:47% ">                 rows[row_new][3] = tblock</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">149</td><td style="background-color: inherit; vertical-align: top; width:47% ">                 rows[row_new][3] = tblock</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">124</td><td style="background-color: inherit; vertical-align: top; width:47% ">                 lineno_new += 1</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">150</td><td style="background-color: inherit; vertical-align: top; width:47% ">                 lineno_new += 1</td>
</tr>
<tr>
<td>  </td><td>  </td><td>  </td><td>  </td>
</tr>
</tbody>
</table>

<div>@@ -134,11 +160,6 @@</div>
<table border="0" style="white-space: pre-wrap; border-collapse: collapse; font-family: Courier New, Courier, monospace;" width="100%">
<tbody>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">134</td><td style="background-color: inherit; vertical-align: top; width:47% ">                  html_helper.close_tag("table")]</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">160</td><td style="background-color: inherit; vertical-align: top; width:47% ">                  html_helper.close_tag("table")]</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">135</td><td style="background-color: inherit; vertical-align: top; width:47% ">         return "\n".join(html)</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">161</td><td style="background-color: inherit; vertical-align: top; width:47% ">         return "\n".join(html)</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">136</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">162</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">137</td><td style="background-color: pink; vertical-align: top; width:47%">-    def _td_block_lineno(self, lineno):</td><td>  </td><td>  </td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">138</td><td style="background-color: pink; vertical-align: top; width:47%">-        td_attrs_lineno = {"style": "background-color: lightgray; text-align: right;",</td><td>  </td><td>  </td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">139</td><td style="background-color: pink; vertical-align: top; width:47%">-                           }</td><td>  </td><td>  </td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">140</td><td style="background-color: pink; vertical-align: top; width:47%">-        return html_helper.td_block([str(lineno)], td_attrs_lineno)</td><td>  </td><td>  </td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">141</td><td style="background-color: pink; vertical-align: top; width:47%">-</td><td>  </td><td>  </td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">142</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">163</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">143</td><td style="background-color: inherit; vertical-align: top; width:47% "> class UnifiedDiff(object):</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">164</td><td style="background-color: inherit; vertical-align: top; width:47% "> class UnifiedDiff(object):</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">144</td><td style="background-color: inherit; vertical-align: top; width:47% ">     """</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">165</td><td style="background-color: inherit; vertical-align: top; width:47% ">     """</td>
</tr>
<tr>
<td>  </td><td>  </td><td>  </td><td>  </td>
</tr>
</tbody>
</table>

<div>@@ -180,7 +201,7 @@</div>
<table border="0" style="white-space: pre-wrap; border-collapse: collapse; font-family: Courier New, Courier, monospace;" width="100%">
<tbody>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">180</td><td style="background-color: inherit; vertical-align: top; width:47% ">         --- a/src/eval_env.cc</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">201</td><td style="background-color: inherit; vertical-align: top; width:47% ">         --- a/src/eval_env.cc</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">181</td><td style="background-color: inherit; vertical-align: top; width:47% ">         +++ b/src/eval_env.cc</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">202</td><td style="background-color: inherit; vertical-align: top; width:47% ">         +++ b/src/eval_env.cc</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">182</td><td style="background-color: inherit; vertical-align: top; width:47% ">         """</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">203</td><td style="background-color: inherit; vertical-align: top; width:47% ">         """</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">183</td><td style="background-color: pink; vertical-align: top; width:47%">-        reg = re.compile("--- a/(?P&lt;file_name&gt;.+)")</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">204</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        reg = re.compile("%s b/(?P&lt;file_name&gt;.+)" % (re.escape("+++")))</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">184</td><td style="background-color: inherit; vertical-align: top; width:47% ">         for line in self.diff:</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">205</td><td style="background-color: inherit; vertical-align: top; width:47% ">         for line in self.diff:</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">185</td><td style="background-color: inherit; vertical-align: top; width:47% ">             match = reg.match(line)</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">206</td><td style="background-color: inherit; vertical-align: top; width:47% ">             match = reg.match(line)</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">186</td><td style="background-color: inherit; vertical-align: top; width:47% ">             if match:</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">207</td><td style="background-color: inherit; vertical-align: top; width:47% ">             if match:</td>
</tr>
<tr>
<td>  </td><td>  </td><td>  </td><td>  </td>
</tr>
</tbody>
</table>

<h2>unified_diff_ut.py</h2>
<div>@@ -4,20 +4,44 @@</div>
<table border="0" style="white-space: pre-wrap; border-collapse: collapse; font-family: Courier New, Courier, monospace;" width="100%">
<tbody>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">4</td><td style="background-color: inherit; vertical-align: top; width:47% "> import unittest</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">4</td><td style="background-color: inherit; vertical-align: top; width:47% "> import unittest</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">5</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">5</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">6</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">6</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">7</td><td style="background-color: pink; vertical-align: top; width:47%">-def read_file_contents(fullpath):</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">7</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+OVERWRITE_EXPECTED = False</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">8</td><td style="background-color: pink; vertical-align: top; width:47%">-    with file(fullpath) as fp:</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">8</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">9</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">10</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+def read_file_contents(full_path):</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">11</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+    if not os.path.isfile(full_path):</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">12</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        print("File not exist: " + full_path)</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">13</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        return ""</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">14</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+    with file(full_path) as fp:</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">9</td><td style="background-color: inherit; vertical-align: top; width:47% ">         contents = fp.read()</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">15</td><td style="background-color: inherit; vertical-align: top; width:47% ">         contents = fp.read()</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">10</td><td style="background-color: inherit; vertical-align: top; width:47% ">     return contents</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">16</td><td style="background-color: inherit; vertical-align: top; width:47% ">     return contents</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">11</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">17</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">12</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">18</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">19</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+def write_file_if_necessary(full_path, contents):</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">20</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+    if not OVERWRITE_EXPECTED:</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">21</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        return</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">22</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+    if os.path.isfile(full_path):</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">23</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        print("WARNING: Write to an existent file " + full_path)</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">24</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">25</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+    with file(full_path, "w") as fp:</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">26</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        fp.write(contents)</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">27</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">28</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">13</td><td style="background-color: inherit; vertical-align: top; width:47% "> def get_input_trunk(tests_dir, basename):</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">29</td><td style="background-color: inherit; vertical-align: top; width:47% "> def get_input_trunk(tests_dir, basename):</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">14</td><td style="background-color: inherit; vertical-align: top; width:47% ">     test_file = os.path.join(tests_dir, basename + ".trunk")</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">30</td><td style="background-color: inherit; vertical-align: top; width:47% ">     test_file = os.path.join(tests_dir, basename + ".trunk")</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">15</td><td style="background-color: inherit; vertical-align: top; width:47% ">     return read_file_contents(test_file)</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">31</td><td style="background-color: inherit; vertical-align: top; width:47% ">     return read_file_contents(test_file)</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">16</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">32</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">17</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">33</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">18</td><td style="background-color: pink; vertical-align: top; width:47%">-def get_expected_html_from_trunk(tests_dir, basename):</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">34</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+def expected_filename(tests_dir, basename, external_css=False):</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">19</td><td style="background-color: pink; vertical-align: top; width:47%">-    expected_file = os.path.join(tests_dir, basename + "-expect.html")</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">35</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+    if external_css:</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">20</td><td style="background-color: pink; vertical-align: top; width:47%">-    return read_file_contents(expected_file)</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">36</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        filename = basename + "-external-css-expect.html"</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">37</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+    else:</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">38</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        filename = basename + "-expect.html"</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">39</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+    return os.path.join(tests_dir, filename)</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">40</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">41</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">42</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+def get_expected_html_from_trunk(tests_dir, basename, external_css=False):</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">43</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+    full_path = expected_filename(tests_dir, basename, external_css)</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">44</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+    return read_file_contents(full_path)</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">21</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">45</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">22</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">46</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">23</td><td style="background-color: inherit; vertical-align: top; width:47% "> def is_contents_equal(alex, bob):</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">47</td><td style="background-color: inherit; vertical-align: top; width:47% "> def is_contents_equal(alex, bob):</td>
</tr>
<tr>
<td>  </td><td>  </td><td>  </td><td>  </td>
</tr>
</tbody>
</table>

<div>@@ -57,22 +81,58 @@</div>
<table border="0" style="white-space: pre-wrap; border-collapse: collapse; font-family: Courier New, Courier, monospace;" width="100%">
<tbody>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">57</td><td style="background-color: inherit; vertical-align: top; width:47% ">         self.assertEqual(7, len_new)</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">81</td><td style="background-color: inherit; vertical-align: top; width:47% ">         self.assertEqual(7, len_new)</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">58</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">82</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">59</td><td style="background-color: inherit; vertical-align: top; width:47% ">     def test_diff_to_html_oneline(self):</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">83</td><td style="background-color: inherit; vertical-align: top; width:47% ">     def test_diff_to_html_oneline(self):</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">60</td><td style="background-color: pink; vertical-align: top; width:47%">-        trunk = get_input_trunk(self.tests_dir, "oneline-diff")</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">84</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        basename = "oneline-diff"</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">61</td><td style="background-color: pink; vertical-align: top; width:47%">-        expected = get_expected_html_from_trunk(self.tests_dir,</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">85</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        trunk = get_input_trunk(self.tests_dir, basename)</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">62</td><td style="background-color: pink; vertical-align: top; width:47%">-                                                "oneline-diff")</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">86</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        expected = get_expected_html_from_trunk(self.tests_dir, basename)</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">63</td><td style="background-color: inherit; vertical-align: top; width:47% ">         udt = UnifiedDiffTrunk(trunk)</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">87</td><td style="background-color: inherit; vertical-align: top; width:47% ">         udt = UnifiedDiffTrunk(trunk)</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">64</td><td style="background-color: inherit; vertical-align: top; width:47% ">         html = udt.format_to_html(external_css=False)</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">88</td><td style="background-color: inherit; vertical-align: top; width:47% ">         html = udt.format_to_html(external_css=False)</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">65</td><td style="background-color: pink; vertical-align: top; width:47%">-        #print(html)</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">89</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        write_file_if_necessary(expected_filename(self.tests_dir,</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">90</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+                                                  basename,</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">91</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+                                                  external_css=False),</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">92</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+                                html)</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">66</td><td style="background-color: inherit; vertical-align: top; width:47% ">         self.assertTrue(is_contents_equal(expected, html))</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">93</td><td style="background-color: inherit; vertical-align: top; width:47% ">         self.assertTrue(is_contents_equal(expected, html))</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">67</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">94</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">68</td><td style="background-color: pink; vertical-align: top; width:47%">-    def test_diff_to_html_multiline(self):</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">95</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+    def test_diff_to_html_oneline_external_css(self):</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">69</td><td style="background-color: pink; vertical-align: top; width:47%">-        trunk = get_input_trunk(self.tests_dir, "multiline-diff")</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">96</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        basename = "oneline-diff"</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">97</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        trunk = get_input_trunk(self.tests_dir, basename)</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">70</td><td style="background-color: inherit; vertical-align: top; width:47% ">         expected = get_expected_html_from_trunk(self.tests_dir,</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">98</td><td style="background-color: inherit; vertical-align: top; width:47% ">         expected = get_expected_html_from_trunk(self.tests_dir,</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">71</td><td style="background-color: pink; vertical-align: top; width:47%">-                                                "multiline-diff")</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">99</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+                                                basename,</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">100</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+                                                external_css=True)</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">101</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        udt = UnifiedDiffTrunk(trunk)</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">102</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        html = udt.format_to_html(external_css=True)</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">103</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">104</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        write_file_if_necessary(expected_filename(self.tests_dir,</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">105</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+                                                  basename,</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">106</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+                                                  external_css=True),</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">107</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+                                html)</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">108</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        self.assertTrue(is_contents_equal(expected, html))</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">109</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">110</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+    def test_diff_to_html_multiline_external_css(self):</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">111</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        basename = "multiline-diff"</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">112</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        trunk = get_input_trunk(self.tests_dir, basename)</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">113</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        expected = get_expected_html_from_trunk(self.tests_dir, basename,</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">114</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+                                                external_css=True)</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">115</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        udt = UnifiedDiffTrunk(trunk)</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">116</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        html = udt.format_to_html(external_css=True)</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">117</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        write_file_if_necessary(expected_filename(self.tests_dir,</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">118</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+                                                  basename,</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">119</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+                                                  external_css=True),</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">120</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+                                html)</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">121</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        self.assertEqual(expected, html)</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">122</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">123</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+    def test_diff_to_html_multiline(self):</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">124</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        basename = "multiline-diff"</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">125</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        trunk = get_input_trunk(self.tests_dir, basename)</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">126</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        expected = get_expected_html_from_trunk(self.tests_dir, basename)</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">72</td><td style="background-color: inherit; vertical-align: top; width:47% ">         udt = UnifiedDiffTrunk(trunk)</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">127</td><td style="background-color: inherit; vertical-align: top; width:47% ">         udt = UnifiedDiffTrunk(trunk)</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">73</td><td style="background-color: inherit; vertical-align: top; width:47% ">         html = udt.format_to_html(external_css=False)</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">128</td><td style="background-color: inherit; vertical-align: top; width:47% ">         html = udt.format_to_html(external_css=False)</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">129</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+        write_file_if_necessary(expected_filename(self.tests_dir,</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">130</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+                                                  basename,</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">131</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+                                                  external_css=False),</td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">132</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+                                html)</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">74</td><td style="background-color: inherit; vertical-align: top; width:47% ">         self.assertEqual(expected, html)</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">133</td><td style="background-color: inherit; vertical-align: top; width:47% ">         self.assertEqual(expected, html)</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">75</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">134</td><td style="background-color: inherit; vertical-align: top; width:47% "> </td>
</tr>
<tr>
<td>  </td><td>  </td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">135</td><td style="background-color: yellowgreen; vertical-align: top; width:47%">+</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">76</td><td style="background-color: inherit; vertical-align: top; width:47% "> class UnifiedDiffTest(unittest.TestCase):</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">136</td><td style="background-color: inherit; vertical-align: top; width:47% "> class UnifiedDiffTest(unittest.TestCase):</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">77</td><td style="background-color: inherit; vertical-align: top; width:47% ">     def setUp(self):</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">137</td><td style="background-color: inherit; vertical-align: top; width:47% ">     def setUp(self):</td>
</tr>
<tr>
<td style="background-color: lightgray; vertical-align: top; text-align: right; ">78</td><td style="background-color: inherit; vertical-align: top; width:47% ">         self.tests_dir = os.path.join(__file__, "..", "tests")</td><td style="background-color: lightgray; vertical-align: top; text-align: right; ">138</td><td style="background-color: inherit; vertical-align: top; width:47% ">         self.tests_dir = os.path.join(__file__, "..", "tests")</td>
</tr>
<tr>
<td>  </td><td>  </td><td>  </td><td>  </td>
</tr>
</tbody>
</table>
